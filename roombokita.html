<!DOCTYPE html>
<html>
<head>
    <title>Roomba CONTROL</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/css/materialize.min.css">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/js/materialize.min.js"></script>
    <script src="/node_modules/jquery/dist/jquery.min.js"></script>
    <script src="node_modules/socket.io-client/dist/socket.io.min.js"></script>
</head>
<body>
  <div class="container">
    <nav class="nav-extended green">
      <div class="nav-wrapper">
        <a href="roombokita.html" class="brand-logo center"><img id="logo" src="img/roomba2.jpg" width="30px">RoombOkita Control</a>
      </div>
      <div class="nav-content green">
        <ul class="tabs tabs-transparent">
          <li class="tab"><a class="active" href="#manualControl">Manual Control</a></li>
          <li id="tab2" class="tab"><a href="#mereBelief">Mere Belief Answers</a></li>
        </ul>
      </div>
      </nav>
      <!-- FIRST TAB  -->
      <div id="manualControl" class="col s10">
        <div class="section">
          <h4 class="purple-text text-darken-3 center-align">Manual Control</h4>
          <div class="row">
            <div class="col s6 center">
              <a id="connect" class="waves-effect waves-light btn-large green lighten-2" onclick = "clientConnect()" ><i class="material-icons left">settings_input_antenna</i>Connect to Roomba</a>
              <a id="disconnect" class="waves-effect waves-light btn-large red disabled" onclick = "clientDisconnect()"><i class="material-icons left">highlight_off</i>Disconnect Roomba</a>
              <div>STATUS: <span id="status">Disconnected</span><img id="greenLight" class="light" src="img/green_light.png" alt=""><img id="redLight"class="light" src="img/red_light.png" alt=""></div>
            </div>
            <div  id="controls"class="col s6 center">
              <a id="sleep" class="waves-effect waves-purple btn-large purple darken-2" onclick= "sleep()"><i class="material-icons left">brightness_3</i>Sleep</a>
              <a id="wakeUp" class="waves-effect waves-purple btn-large  yellow darken-1" onclick= "wakeUp()"><i class="material-icons left">brightness_7</i>Wake Up</a>
            </div>
          </div>
            <div id="controls2">
              <div class="row">
                <div class="col s6">
                  <h5 class="purple-text text-darken-3 center-align">Movement Control</h5>
                  <div class="grid-container">
                    <div class="grid">
                      <a id="rotateLeft" class="btn-floating btn-large waves-effect waves-light green"><i class="material-icons">replay</i></a>
                      <a id="forward" class="btn-floating btn-large waves-effect waves-light orange lighten-1"><i class="material-icons">keyboard_arrow_up</i></a>
                      <a id="rotateRight" class="btn-floating btn-large waves-effect waves-light green"><i class="material-icons">replay</i></a>
                      <img id="logo2" src="img/roomba2.jpg" width="50px" height="50px">
                      <div class="cell"></div>
                      <a id="back" class="btn-floating btn-large waves-effect waves-light orange lighten-1"><i class="material-icons">keyboard_arrow_down</i></a>
                      <div class="cell"></div>
                    </div>
                  </div>
                </div>
                <div class="col s6 center">
                  <h5 class="purple-text text-darken-3">Voice Control</h5>
                  <div class="col s6 center">
                    <form action="#">
                      <p class="range-field">
                        <input type="range" id="globalVolume" min="0" max="100"/>
                        <span>GLOBAL VOLUME</span>
                      </p>
                    </form>
                    <form action="#">
                      <p class="range-field">
                        <input type="range" step=0.1 id="speechVolume" min="1" max="4" onchange="updatePitch(this.value)"/>
                        <span>PITCH SHIFT</span>
                      </p>
                    </form>
                  </div>
                  <div class="col s6 center">
                    <form action="#">
                      <p class="range-field">
                        <input type="range" step=0.1 id="doubleVoice" min="1" max="4" onchange="updateDoubleVoice(this.value)"/>
                        <span>DOUBLE VOICE PITCH</span>
                      </p>
                    </form>
                    <form action="#">
                      <p class="range-field">
                        <input type="range" step=0.1 id="doubleVoiceLevel" min="0" max="4" onchange="updateDoubleVoiceLevel(this.value)"/>
                        <span>DOUBLE VOICE LEVEL</span>
                      </p>
                    </form>
                  </div>
                  <div class="col s6 center">
                    <form action="#">
                      <p class="range-field">
                        <input type="range" step=0.1 id="doubleVoiceTimeShift" min="0" max="0.5" onchange="updatedoubleVoiceTimeShift(this.value)"/>
                        <span>DOUBLE VOICE TIME SHIFT</span>
                      </p>
                    </form>
                  </div>
                  <div class="col s6 center">
                    <a id="test" class="waves-effect waves-purple btn-large green" onclick="testVoice()"><i class="material-icons left">chat</i>Test</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- SECOND TAB  -->
      <div id="mereBelief" class="col s12">
        <div class="section">
          <h4 class="purple-text text-darken-3 center-align">Mere Belief Answers</h4>
          <div class="row">
            <div class="col s12 center">
              <a class="waves-effect waves-purple btn-large  orange lighten-1" onclick= "answer1Client()"><i class="material-icons left">play_arrow</i>Answer 1</a>
              <a class="waves-effect waves-purple btn-large  orange lighten-1" onclick= "answer2Client()"><i class="material-icons left">play_arrow</i>Answer 2</a>
              <a class="waves-effect waves-purple btn-large  orange lighten-1" onclick= "answer3Client()"><i class="material-icons left">play_arrow</i>Answer 3</a>
              <a class="waves-effect waves-purple btn-large  orange lighten-1" onclick= "answer4Client()"><i class="material-icons left">play_arrow</i>Answer 4</a>
              <a class="waves-effect waves-purple btn-large  orange lighten-1" onclick= "answer5Client()"><i class="material-icons left">play_arrow</i>Answer 5</a>
              <a class="waves-effect waves-purple btn-large  orange lighten-1" onclick= "answer6Client()"><i class="material-icons left">play_arrow</i>Answer 6</a>
              <a class="waves-effect waves-purple btn-large  orange lighten-1" onclick= "answer7Client()"><i class="material-icons left">play_arrow</i>Answer 7</a>
              <a class="waves-effect waves-purple btn-large  orange lighten-1" onclick= "answer8Client()"><i class="material-icons left">play_arrow</i>Answer 8</a>
              <a class="waves-effect waves-purple btn-large  orange lighten-1" onclick= "answer9Client()"><i class="material-icons left">play_arrow</i>Answer 9</a>
            </div>
          </div>
          <div class="divider"></div>
          <div class="row">
            <div class="col s12 center">
              <a id="stopAll" class="waves-effect waves-light btn-large disabled red" onclick= "stopAllClient()"><i class="material-icons left">stop</i>Stop Answer</a>
            </div>
          </div>
          <div class="divider"></div>
        </div>
      </div>
    </div>
<script>

//make click events also touch events
var forward = $('#forward');
var back = $('#back');
var rotateLeft = $('#rotateLeft');
var rotateRight = $('#rotateRight');

function poto () {
  console.log('poto');
}
function touchEvents (button, move1) {
  button.on("touchstart", move1);
  button.on("touchend", stopMove);
}

touchEvents(forward, moveForward);
touchEvents(forward, moveForward);
touchEvents(back, moveBackward);
touchEvents(rotateLeft, leftRotation);
touchEvents(rotateRight, rightRotation);
//
//Initialize socket.io and connect to localhost robot.
var socket = io.connect('http://192.168.10.103:8080');
socket.on('connect', function(data) {
   socket.emit('join', 'Hello World from client');
});
socket.on('messages', function(data) {
      console.log(data);
});

function clientConnect() {
  socket.emit('start', 'Connecting...')
  $("#connect").addClass('disabled');
  $("#disconnect").removeClass('disabled');
}

function clientDisconnect() {
  socket.emit('hola', 'Disconnecting...');
  $("#connect").removeClass('disabled');
  $("#disconnect").addClass('disabled');
}
function moveForward () {
  socket.emit('move', 'Requesting action...')
}

function stopMove () {
  socket.emit('stop', 'Requesting action...')
}

function moveBackward () {
  socket.emit('back', 'Requesting action...')
}

function rightRotation () {
  socket.emit('turn_right', 'Requesting action...')
}

function leftRotation () {
  socket.emit('turn_left', 'Requesting action...')
}

function answer1Client() {
  socket.emit('play_answer1', 'Requesting answer1...')
  $("#stopAll").removeClass('disabled');
}

function answer2Client() {
  socket.emit('play_answer2', 'Requesting answer2...')
}

function answer3Client() {
  socket.emit('play_answer3', 'Requesting answer3...')
}
function answer4Client() {
  socket.emit('play_answer4', 'Requesting answer4...')
}

function answer5Client() {
  socket.emit('play_answer5', 'Requesting answer5...')
}

function answer6Client() {
  socket.emit('play_answer6', 'Requesting answer6...')
}

function answer7Client() {
  socket.emit('play_answer7', 'Requesting answer7...')
}

function answer8Client() {
  socket.emit('play_answer8', 'Requesting answer8...')
}

function answer9Client() {
  socket.emit('play_answer9', 'Requesting answer9...')
}

function stopAllClient() {
  socket.emit('stopAll', 'Stopping All...');
  // $("#stopAll").addClass('disabled');
}

</script>
</body>
</html>
